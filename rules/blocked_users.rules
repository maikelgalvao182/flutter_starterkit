/// ğŸš« ColeÃ§Ã£o de usuÃ¡rios bloqueados
/// Path usado no app:
/// - blockedUsers/{blockId}
///   - blockerId: string (userId de quem bloqueou)
///   - targetId: string (userId de quem foi bloqueado)
///   - createdAt: timestamp
///
/// O blockId Ã© composto: {blockerId}_{targetId}

match /blockedUsers/{blockId} {
  /// ğŸ“– LEITURA:
  /// - UsuÃ¡rio pode ler registros onde ele Ã© o bloqueador OU o bloqueado
  /// - NecessÃ¡rio para verificar se estÃ¡ bloqueado antes de interagir
  allow read: if isSignedIn() && (
    resource.data.blockerId == request.auth.uid ||
    resource.data.targetId == request.auth.uid
  );
  
  /// âœï¸ CRIAR bloqueio:
  /// - Apenas o prÃ³prio usuÃ¡rio pode criar bloqueios
  /// - O blockerId no documento deve ser o usuÃ¡rio autenticado
  allow create: if isSignedIn() &&
    request.resource.data.blockerId == request.auth.uid;
  
  /// âœï¸ ATUALIZAR bloqueio:
  /// - Apenas o bloqueador pode atualizar
  allow update: if isSignedIn() &&
    resource.data.blockerId == request.auth.uid &&
    request.resource.data.blockerId == request.auth.uid;
  
  /// ğŸ—‘ï¸ DELETAR bloqueio:
  /// - Apenas o bloqueador pode remover o bloqueio
  allow delete: if isSignedIn() &&
    resource.data.blockerId == request.auth.uid;
}
