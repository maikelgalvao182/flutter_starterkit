/// üîî Cole√ß√£o de notifica√ß√µes (root collection)
/// Path usado no app:
/// - Notifications/{notificationId}
///   - userId: string (quem recebe - campo principal)
///   - n_receiver_id: string (campo duplicado para compatibilidade - legacy)
///   - n_type: string
///   - n_sender_id: string
///   - n_sender_fullname: string
///   - n_sender_photo_url: string
///   - n_params: map
///   - n_metadata: map
///   - n_related_id: string
///   - n_read: bool
///   - timestamp: timestamp

match /Notifications/{notificationId} {
  // Permitir leitura se o usu√°rio √© o destinat√°rio (validar ambos os campos)
  allow read: if isSignedIn() && 
    (resource.data.userId == request.auth.uid || resource.data.n_receiver_id == request.auth.uid);
  
  // Permitir deletar apenas se for o destinat√°rio
  allow delete: if isSignedIn() && 
    (resource.data.userId == request.auth.uid || resource.data.n_receiver_id == request.auth.uid);
  
  // Qualquer usu√°rio logado pode criar/atualizar notifica√ß√µes
  allow create, update: if isSignedIn();
}
