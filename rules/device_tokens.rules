/// 游댐 Cole칞칚o de tokens FCM para push notifications
/// Path usado no app:
/// - DeviceTokens/{tokenId}
///   - userId: string (ID do usu치rio dono do token)
///   - token: string (FCM token)
///   - deviceId: string (ID 칰nico do dispositivo)
///   - deviceName: string (nome do dispositivo)
///   - platform: string ("android" | "ios")
///   - createdAt: timestamp
///   - updatedAt: timestamp
///   - lastUsedAt: timestamp
///
/// Regras:
/// - Usu치rio pode ler apenas seus pr칩prios tokens
/// - Usu치rio pode criar/atualizar apenas seus pr칩prios tokens
/// - Usu치rio pode deletar apenas seus pr칩prios tokens
/// - Cloud Functions podem ler/escrever em qualquer token

match /DeviceTokens/{tokenId} {
  // Permite leitura apenas se for o dono do token
  allow read: if isSignedIn() && resource.data.userId == request.auth.uid;
  
  // Permite cria칞칚o/atualiza칞칚o apenas se o userId no documento for o pr칩prio usu치rio
  allow create, update: if isSignedIn() && request.resource.data.userId == request.auth.uid;
  
  // Permite exclus칚o apenas se for o dono do token
  allow delete: if isSignedIn() && resource.data.userId == request.auth.uid;
}
