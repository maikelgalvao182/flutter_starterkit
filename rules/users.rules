/// ğŸ‘¤ ColeÃ§Ã£o principal de usuÃ¡rios
/// Path usado no app:
/// - Users/{userId}
///   - fullName: string
///   - instagram: string
///   - jobTitle: string
///   - gender: string
///   - bio: string
///   - country: string
///   - originSource: string
///   - interests: array<string>
///   - agreeTerms: bool
///   - photoUrl: string
///   - createdAt: timestamp
///   - updatedAt: timestamp
///   - status: string ("active" | "blocked" | ...)
///   - isBlocked: bool

match /Users/{userId} {
  allow read: if isSignedIn();
  allow create, update, delete: if isOwner(userId);
  
  /// ğŸ‘ï¸ SubcoleÃ§Ã£o de visitas ao perfil (legacy - deprecada)
  /// Path: Users/{userId}/visits/{visitId}
  match /visits/{visitId} {
    allow read: if isOwner(userId);
    allow create, update: if isSignedIn();
    allow delete: if isOwner(userId);
  }
}

/// ğŸ‘¥ ColeÃ§Ã£o em minÃºsculo usada em algumas partes do app
/// Path usado no app:
/// - users/{userId}
///   (espelho simplificado de Users/{userId} para o mÃ³dulo de perfil/cache)

match /users/{userId} {
  allow read: if isSignedIn();
  allow create, update, delete: if isOwner(userId);
  
  /// ğŸ‘ï¸ SubcoleÃ§Ã£o de visitas ao perfil (duplicada por compatibilidade)
  /// Path: users/{userId}/visits/{visitId}
  match /visits/{visitId} {
    allow read: if isOwner(userId);
    allow create, update: if isSignedIn();
    allow delete: if isOwner(userId);
  }
}
